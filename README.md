# ‚òÅÔ∏è Weather-Bot

---

## üí° –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Weather-Bot** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –ø–æ–≥–æ–¥—ã. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å —É–ø–æ—Ä–æ–º –Ω–∞ **–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**, **–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** –∏ **—á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (Separation of Concerns)**.

–í–º–µ—Å—Ç–æ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã: **`python_interface`** –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞, –∏ **`weather_core`** –Ω–∞ C++ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –°–≤—è–∑—å –º–µ–∂–¥—É –Ω–∏–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π **Apache Kafka**, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–ª–∞–±—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –∏ –≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.

---

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### deployment/
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- `docker-compose.yml` ‚Äî –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

---

### sql/
- `init.sql` ‚Äî –°–∫—Ä–∏–ø—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

### python_interface/
- –°–µ—Ä–≤–∏—Å—ã –Ω–∞ Python

#### nlp_spacy/
- –°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ (NLP)
- `nlp_app.py` ‚Äî FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `nlp_service.py` ‚Äî –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ —Å spaCy
- `nlp_patterns.py` ‚Äî –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥

#### python_bot/
- –¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
- `main.py` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- `command_handlers.py` ‚Äî –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ Telegram
- `kafka_service.py` ‚Äî –°–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Kafka
- `nlp_handler.py` ‚Äî –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å NLP-—Å–µ—Ä–≤–∏—Å–æ–º

---

### weather_core/
- –ë—ç–∫–µ–Ω–¥ –Ω–∞ C++ (—è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã)
- `main.cc` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ C++ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `CMakeLists.txt`

---

### command_logic/
- –õ–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

---

### controllers/
- HTTP-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã Drogon (–¥–ª—è API)

---

### kafka/
- –ö–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Kafka

---

### models/
- ORM-–º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

### parsers/
- –ü–∞—Ä—Å–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

### services/
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (—Ä–∞–±–æ—Ç–∞ —Å –ë–î, API –∏ —Ç.–¥.)

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Python-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (`python_interface`)

#### Telegram-–±–æ—Ç (`python_bot`)
"–õ–∏—Ü–æ" –ø—Ä–æ–µ–∫—Ç–∞, –æ—Ç–≤–µ—á–∞—é—â–µ–µ –∑–∞ –ø—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ Telegram.

* **`main.py`**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–æ—Ç–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.
* **`command_handlers.py`**: –°–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ Telegram (`/start`, `/help`) –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
* **`nlp_handler.py`**: –ö–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ `nlp_spacy` —Å–µ—Ä–≤–∏—Å, –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –∏ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ.
* **`kafka_service.py`**: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç (–ø—Ä–æ–¥—é—Å–∏—Ä—É–µ—Ç) —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–æ–ø–∏–∫ Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ C++ –±—ç–∫–µ–Ω–¥–æ–º.

#### NLP-—Å–µ—Ä–≤–∏—Å (`nlp_spacy`)
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –µ–≥–æ –≤ –º–∞—à–∏–Ω–æ—á–∏—Ç–∞–µ–º—É—é –∫–æ–º–∞–Ω–¥—É.

* **`nlp_app.py`**: –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ **FastAPI** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–µ–µ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞.
* **`nlp_service.py`**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É **spaCy** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª.
* **`nlp_patterns.py`**: –•—Ä–∞–Ω–∏—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è spaCy, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –≤ —Ç–µ–∫—Å—Ç–µ –∫–æ–º–∞–Ω–¥—ã (–ø–æ–≥–æ–¥–∞, –ø–æ–¥–ø–∏—Å–∫–∞) –∏ —Å—É—â–Ω–æ—Å—Ç–∏ (–≥–æ—Ä–æ–¥, –¥–∞—Ç–∞, –≤—Ä–µ–º—è).

### 2. –ë—ç–∫–µ–Ω–¥ –Ω–∞ C++ (`weather_core`)

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ –≤—Å—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É. –ù–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ C++ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ **Drogon**.

* **`main.cc`**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Drogon, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–ª–∞–≥–∏–Ω—ã –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
* **`services/`**: –ù–∞–±–æ—Ä –∫–ª—é—á–µ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö —á–µ—Ä–µ–∑ `AppServicesPlugin.h`:
    * `DataBaseService`: –£–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ –∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ **PostgreSQL**.
    * `WeatherService`: –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –≤–Ω–µ—à–Ω–∏–º API –ø–æ–≥–æ–¥—ã (**OpenWeatherMap**) –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
    * `NotificationService`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
    * `KafkaMessageService`: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ Kafka.
* **`kafka/`**: –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å Kafka:
    * `KafkaConsumer.cc`: –°–ª—É—à–∞–µ—Ç —Ç–æ–ø–∏–∫–∏ Kafka, –ø–æ–ª—É—á–∞—è –∫–æ–º–∞–Ω–¥—ã –æ—Ç Python-–±–æ—Ç–∞.
    * `KafkaProducer.cc` / `KafkaResponseSender.cc`: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Kafka.
* **`parsers/`**: –û—Ç–≤–µ—á–∞—é—Ç –∑–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –≤ –¥—Ä—É–≥–æ–π:
    * `TelegramUpdateParser.h`: –ü–∞—Ä—Å–∏—Ç JSON-—Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ Kafka, —Å–æ–¥–µ—Ä–∂–∞—â–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–∞–Ω–¥–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    * `OpenWeatherMapParser.h`: –ü–∞—Ä—Å–∏—Ç JSON-–æ—Ç–≤–µ—Ç –æ—Ç –ø–æ–≥–æ–¥–Ω–æ–≥–æ API.
* **`command_logic/`**: –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã (`/weather`, `/forecast`) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–≤–æ–π –∫–ª–∞—Å—Å-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WeatherCommand.cc`), —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `ICommandLogic.h`. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —á–∏—Å—Ç–æ—Ç—É –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∫–æ–¥–∞.
* **`models/`**: ORM-–º–æ–¥–µ–ª–∏, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Drogon –Ω–∞ –æ—Å–Ω–æ–≤–µ `model.json`. –û–Ω–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü–∞–º –≤ PostgreSQL (`Users.h`, `Subscriptions.h` –∏ —Ç.–¥.) –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ë–î –≤ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å—Ç–∏–ª–µ.
* **`controllers/`**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã Drogon. –í–µ—Ä–æ—è—Ç–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–ª—É–∂–µ–±–Ω–æ–≥–æ REST API (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (`PingController.h`) –∏–ª–∏ –ø—Ä—è–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏).

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (`deployment`)

* **`docker-compose.yml`**: –§–∞–π–ª –¥–ª—è **Docker Compose**, –∫–æ—Ç–æ—Ä—ã–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–æ–µ–∫—Ç–∞ (Python-–±–æ—Ç, NLP, C++ –±—ç–∫–µ–Ω–¥, PostgreSQL, Kafka) –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.
* **`sql/init.sql`**: SQL-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–æ–∑–¥–∞—ë—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö **PostgreSQL** –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü (`users`, `subscriptions`, `weather_cache` –∏ –¥—Ä.).

---

## üîó –£—Ç–æ—á–Ω—ë–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1.  **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ "–ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –≤ –°–æ—á–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞".
2.  **`python_bot`** (`command_handlers.py`) –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –≤ `nlp_handler.py`.
3.  **`nlp_handler.py`** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç `http://nlp_spacy/process` POST-–∑–∞–ø—Ä–æ—Å–æ–º.
4.  **`nlp_spacy`** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON: `{"command": "/forecast", "entities": {"city": "–°–æ—á–∏", "date": "tomorrow"}}`.
5.  **`nlp_handler.py`** –≤–∏–¥–∏—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –∏ —á–µ—Ä–µ–∑ `kafka_service.py` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Å `user_id`, –∫–æ–º–∞–Ω–¥–æ–π –∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏) –≤ —Ç–æ–ø–∏–∫ Kafka `bot_commands`.
6.  **`weather_core`**: `KafkaConsumer.cc` –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ.
7.  `TelegramUpdateParser.cc` —Ä–∞–∑–±–∏—Ä–∞–µ—Ç JSON –≤ C++ DTO (Data Transfer Object).
8.  `KafkaMessageService` –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç DTO –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ ‚Äî `ForecastCommand.cc`.
9.  **`ForecastCommand.cc`** –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ª–æ–≥–∏–∫—É:
    * –û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `WeatherService`.
    * `WeatherService` –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ OpenWeatherMap API, –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.
    * `OpenWeatherMapParser.cc` –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç.
    * –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∫—ç—à (`weather_cache`) —á–µ—Ä–µ–∑ `DataBaseService`.
    * –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
10. **`KafkaResponseSender.cc`** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —Ç–æ–ø–∏–∫ `user_responses`.
11. **`python_bot`** (–∏–º–µ—é—â–∏–π —Å–≤–æ–µ–≥–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è Kafka) –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ç–æ–ø–∏–∫–∞ `user_responses` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram.
